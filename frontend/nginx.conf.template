server {
    # DigitalOcean injects $PORT (usually 8080). Listen on it.
    listen       ${PORT};
    listen  [::]:${PORT};
    server_name  _;

    root  /usr/share/nginx/html;
    index index.html;

    # SPA fallback so deep links work
    location / {
        try_files $uri /index.html;
    }

    # Health endpoint for App Platform readiness checks
    location = /health {
        add_header Content-Type text/plain;
        return 200 "ok";
    }
}
